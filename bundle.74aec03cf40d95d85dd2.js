"use strict";(self.webpackChunkdallog=self.webpackChunkdallog||[]).push([[612],{87612:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": () => (/* binding */ Profile_Profile)\n});\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs3/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(45567);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime-corejs3/core-js-stable/instance/trim.js\nvar trim = __webpack_require__(81607);\nvar trim_default = /*#__PURE__*/__webpack_require__.n(trim);\n// EXTERNAL MODULE: ./src/validation/index.ts\nvar validation = __webpack_require__(18932);\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(67294);\n// EXTERNAL MODULE: ./node_modules/react-router/index.js\nvar react_router = __webpack_require__(96974);\n// EXTERNAL MODULE: ./node_modules/recoil/es/index.js\nvar es = __webpack_require__(4480);\n// EXTERNAL MODULE: ./node_modules/react-query/es/index.js\nvar react_query_es = __webpack_require__(88767);\n// EXTERNAL MODULE: ./src/hooks/useSnackBar.ts\nvar hooks_useSnackBar = __webpack_require__(38832);\n// EXTERNAL MODULE: ./src/recoil/atoms/index.ts\nvar atoms = __webpack_require__(28994);\n// EXTERNAL MODULE: ./src/constants/index.ts\nvar constants = __webpack_require__(97355);\n// EXTERNAL MODULE: ./src/constants/api.ts\nvar api = __webpack_require__(50077);\n// EXTERNAL MODULE: ./src/constants/message.ts\nvar message = __webpack_require__(51494);\n// EXTERNAL MODULE: ./src/utils/storage.ts\nvar storage = __webpack_require__(92976);\n// EXTERNAL MODULE: ./src/api/profile.ts\nvar profile = __webpack_require__(84942);\n;// CONCATENATED MODULE: ./src/hooks/@queries/profile.ts\n\n\n\n\n\n\n\n\n\n\n\nfunction useDeleteProfile(_ref) {\n  var _onSuccess = _ref.onSuccess;\n  var navigate = useNavigate();\n\n  var _useRecoilValue = useRecoilValue(userState),\n      accessToken = _useRecoilValue.accessToken;\n\n  var _useSnackBar = useSnackBar(),\n      openSnackBar = _useSnackBar.openSnackBar;\n\n  var _useMutation = useMutation(function () {\n    return profileApi["delete"](accessToken);\n  }, {\n    onSuccess: function onSuccess() {\n      _onSuccess && _onSuccess();\n      removeAccessToken();\n      removeRefreshToken();\n      navigate(PATH.MAIN);\n      location.reload();\n      openSnackBar(SUCCESS_MESSAGE.DELETE_PROFILE);\n    }\n  }),\n      mutate = _useMutation.mutate;\n\n  return {\n    mutate: mutate\n  };\n}\n\nfunction usePatchProfile(_ref2) {\n  var accessToken = _ref2.accessToken;\n  var queryClient = (0,react_query_es.useQueryClient)();\n\n  var _useSnackBar2 = (0,hooks_useSnackBar/* default */.Z)(),\n      openSnackBar = _useSnackBar2.openSnackBar;\n\n  var _useMutation2 = (0,react_query_es.useMutation)(function (body) {\n    return profile/* default.patch */.Z.patch(accessToken, body);\n  }, {\n    onSuccess: function onSuccess() {\n      queryClient.invalidateQueries(api/* CACHE_KEY.PROFILE */.oy.PROFILE);\n      queryClient.invalidateQueries(api/* CACHE_KEY.CATEGORIES */.oy.CATEGORIES);\n      openSnackBar(message/* SUCCESS_MESSAGE.PATCH_PROFILE_NAME */.nS.PATCH_PROFILE_NAME);\n    }\n  }),\n      mutate = _useMutation2.mutate;\n\n  return {\n    mutate: mutate\n  };\n}\n\n\n// EXTERNAL MODULE: ./src/hooks/useControlledInput.ts\nvar useControlledInput = __webpack_require__(47140);\n// EXTERNAL MODULE: ./src/components/@common/Button/Button.tsx + 1 modules\nvar Button = __webpack_require__(78276);\n// EXTERNAL MODULE: ./src/components/@common/Fieldset/Fieldset.tsx + 1 modules\nvar Fieldset = __webpack_require__(65211);\n// EXTERNAL MODULE: ./src/constants/validate.ts\nvar validate = __webpack_require__(7100);\n// EXTERNAL MODULE: ./node_modules/react-icons/md/index.esm.js\nvar index_esm = __webpack_require__(5434);\n// EXTERNAL MODULE: ./src/components/Profile/Profile.styles.ts\nvar Profile_styles = __webpack_require__(6522);\n// EXTERNAL MODULE: ./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\nvar emotion_react_browser_esm = __webpack_require__(70917);\n;// CONCATENATED MODULE: ./src/components/Profile/Profile.tsx\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction Profile() {\n  var _context2, _context3;\n\n  var navigate = (0,react_router/* useNavigate */.s0)();\n  var user = (0,es/* useRecoilValue */.sJ)(atoms/* userState */.KL);\n\n  var _useState = (0,react.useState)(false),\n      _useState2 = (0,slicedToArray/* default */.Z)(_useState, 2),\n      isEditingName = _useState2[0],\n      setEditingName = _useState2[1];\n\n  var editDisplayName = (0,useControlledInput/* default */.Z)(user.displayName);\n\n  var _usePatchProfile = usePatchProfile({\n    accessToken: user.accessToken\n  }),\n      mutate = _usePatchProfile.mutate;\n\n  var handleClickModifyButton = function handleClickModifyButton() {\n    setEditingName(true);\n  };\n\n  var handleClickCompleteButton = function handleClickCompleteButton() {\n    var _context;\n\n    mutate({\n      displayName: trim_default()(_context = editDisplayName.inputValue).call(_context)\n    });\n    setEditingName(false);\n  };\n\n  var handleClickLogoutButton = function handleClickLogoutButton() {\n    if (window.confirm(message/* CONFIRM_MESSAGE.LOGOUT */.kA.LOGOUT)) {\n      (0,storage/* removeAccessToken */.yL)();\n      (0,storage/* removeRefreshToken */.DF)();\n      navigate(constants/* PATH.MAIN */.mD.MAIN);\n      location.reload();\n    }\n  };\n\n  return (0,emotion_react_browser_esm.jsx)("div", {\n    css: Profile_styles/* layoutStyle */.LF\n  }, (0,emotion_react_browser_esm.jsx)("img", {\n    src: user.profileImageUrl,\n    css: Profile_styles/* imageStyle */.aP,\n    alt: "\\uD504\\uB85C\\uD544 \\uC774\\uBBF8\\uC9C0"\n  }), (0,emotion_react_browser_esm.jsx)("div", {\n    css: Profile_styles/* contentStyle */.lx\n  }, isEditingName ? (0,emotion_react_browser_esm.jsx)("form", {\n    css: Profile_styles/* nameButtonStyle */.VS\n  }, (0,emotion_react_browser_esm.jsx)(Fieldset/* default */.Z, {\n    placeholder: user.displayName,\n    value: editDisplayName.inputValue,\n    onChange: editDisplayName.onChangeValue,\n    cssProp: Profile_styles/* inputStyle */.hG,\n    autoFocus: true,\n    isValid: (0,validation/* validateLength */.eR)(trim_default()(_context2 = editDisplayName.inputValue).call(_context2), validate/* VALIDATION_SIZE.MIN_LENGTH */.v6.MIN_LENGTH, validate/* VALIDATION_SIZE.DISPLAY_NAME_MAX_LENGTH */.v6.DISPLAY_NAME_MAX_LENGTH),\n    errorMessage: validate/* VALIDATION_MESSAGE.STRING_LENGTH */.ry.STRING_LENGTH(validate/* VALIDATION_SIZE.MIN_LENGTH */.v6.MIN_LENGTH, validate/* VALIDATION_SIZE.DISPLAY_NAME_MAX_LENGTH */.v6.DISPLAY_NAME_MAX_LENGTH)\n  }), (0,emotion_react_browser_esm.jsx)(Button/* default */.Z, {\n    type: "submit",\n    cssProp: Profile_styles/* menu */.GI,\n    onClick: handleClickCompleteButton,\n    disabled: !(0,validation/* validateLength */.eR)(trim_default()(_context3 = editDisplayName.inputValue).call(_context3), validate/* VALIDATION_SIZE.MIN_LENGTH */.v6.MIN_LENGTH, validate/* VALIDATION_SIZE.DISPLAY_NAME_MAX_LENGTH */.v6.DISPLAY_NAME_MAX_LENGTH)\n  }, (0,emotion_react_browser_esm.jsx)(index_esm/* MdOutlineCheck */.OhQ, {\n    size: 14\n  }), (0,emotion_react_browser_esm.jsx)("span", {\n    css: Profile_styles/* menuTitle */.iK\n  }, "\\uC644\\uB8CC"))) : (0,emotion_react_browser_esm.jsx)("div", null, (0,emotion_react_browser_esm.jsx)("span", {\n    css: Profile_styles/* nameStyle */.P0\n  }, user.displayName), (0,emotion_react_browser_esm.jsx)(Button/* default */.Z, {\n    cssProp: Profile_styles/* menu */.GI,\n    onClick: handleClickModifyButton\n  }, (0,emotion_react_browser_esm.jsx)(index_esm/* MdOutlineModeEdit */.yMw, {\n    size: 14\n  }), (0,emotion_react_browser_esm.jsx)("span", {\n    css: Profile_styles/* menuTitle */.iK\n  }, "\\uC218\\uC815"))), (0,emotion_react_browser_esm.jsx)("span", {\n    css: Profile_styles/* emailStyle */.Xh\n  }, user.email)), (0,emotion_react_browser_esm.jsx)(Button/* default */.Z, {\n    cssProp: Profile_styles/* logoutButtonStyle */.Kr,\n    onClick: handleClickLogoutButton\n  }, "\\uB85C\\uADF8\\uC544\\uC6C3"));\n}\n\n/* harmony default export */ const Profile_Profile = (Profile);\n\n//# sourceURL=webpack://dallog/./src/components/Profile/Profile.tsx_+_1_modules?')}}]);